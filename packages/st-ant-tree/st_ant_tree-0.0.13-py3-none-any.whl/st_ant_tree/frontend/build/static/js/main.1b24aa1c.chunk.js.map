{"version":3,"sources":["AntTree.tsx","index.tsx"],"names":["find_dropdown","dropdown","Array","from","document","getElementsByClassName","height_of_dropdown","forEach","element","height","offsetHeight","withStreamlitConnection","props","useState","undefined","value","setValue","args","treeData","allowClear","bordered","max_height","width_dropdown","disabled","filterTreeNode","multiple","placeholder","status","showArrow","showSearch","treeCheckable","treeDefaultExpandAll","treeDefaultExpandedKeys","treeLine","on_change","on_select","on_search","defaultValue","min_height_dropdown","maxTagCount","key","useEffect","Streamlit","setFrameHeight","on_change_func","Function","on_select_func","on_search_func","defaultValue_tree","loop_through_treeData","input","title","parse","replace","domNode","Element","attribs","class","children","id","placement","style","width","marginTop","onSearch","onSelect","dropdownStyle","maxHeight","overflow","dropdownAlign","offset","onChange","newValue","setComponentValue","onDropdownVisibleChange","setTimeout","current_state","getElementById","getAttribute","getAriaControls","set_height","onTreeExpand","onClear","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1b24aa1c.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  ComponentProps,\r\n  Streamlit,\r\n  withStreamlitConnection,\r\n\r\n} from \"streamlit-component-lib\";\r\n\r\n\r\nimport { TreeSelect } from 'antd';\r\nimport parse, {Element } from 'html-react-parser';\r\n\r\n\r\n//parser to parse the html from the strings in treeData\r\nconst parser = (input: string) =>\r\n  parse(input, {\r\n    replace: domNode => {\r\n      if (domNode instanceof Element && domNode.attribs.class === 'remove') {\r\n        return <></>;\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n//function that takes the id of an element an return its aria controls -> Used to track wether the dropdown is open or not\r\nfunction getAriaControls(id: string) {\r\n  //check if the element hast the attribute aria-expanded\r\n\r\n  if (document.getElementById(id)?.getAttribute(\"aria-expanded\") == null) {\r\n    return \"first_time\";\r\n  }\r\n  else {\r\n  return document.getElementById(id)?.getAttribute(\"aria-expanded\");\r\n  }\r\n\r\n}\r\n\r\nfunction find_dropdown() {\r\n//function to get the height of the dropdown\r\n\r\n  var dropdown = Array.from(document.getElementsByClassName(\"ant-select-dropdown\"));\r\n\r\n  var height_of_dropdown = 0;\r\n  dropdown.forEach((element) => {\r\n  var height = (element as HTMLElement).offsetHeight;\r\n\r\n    //if height is an integer return it\r\n    if (height) {\r\n      //test integer\r\n      if (height % 1 === 0) {\r\n        height_of_dropdown = height;\r\n      }\r\n    }\r\n  });\r\n\r\n  height_of_dropdown = height_of_dropdown + 100;\r\n\r\n  return height_of_dropdown;\r\n  }\r\n\r\n\r\n////Tree Component////\r\nconst TreeComponent = (props: ComponentProps) => {\r\n  const [value, setValue] = useState<string | undefined>(undefined);\r\n\r\n  const {treeData, allowClear, bordered, max_height, width_dropdown, disabled,\r\n    filterTreeNode,multiple, placeholder, status,\r\n    showArrow, showSearch, treeCheckable, treeDefaultExpandAll, treeDefaultExpandedKeys,\r\n    treeLine, on_change, on_select, on_search, defaultValue, min_height_dropdown, maxTagCount, key} = props.args; //Python Args\r\n\r\n\r\n  useEffect(() => {\r\n    Streamlit.setFrameHeight();\r\n  }, []);\r\n\r\n  //Everything the the dropdown visibility changes the height of the component must change as well\r\n  const onDropdownVisibleChange = () => {\r\n\r\n    setTimeout(function() {\r\n      var current_state = getAriaControls(key)\r\n      var height = find_dropdown() \r\n    //if height is 0 set it to 50 \r\n    var set_height = 0;\r\n    if (height < min_height_dropdown) {\r\n      set_height = min_height_dropdown;\r\n    }\r\n    else {\r\n      set_height = height;\r\n    }\r\n    if (current_state == \"true\") {\r\n      Streamlit.setFrameHeight(set_height);\r\n    }\r\n    else {\r\n      Streamlit.setFrameHeight(min_height_dropdown);\r\n    }\r\n    }, 1);\r\n  };\r\n\r\n\r\n  if (on_change) {\r\n    var on_change_func = Function(on_change);\r\n  }\r\n  else {\r\n    var on_change_func = Function();\r\n  }\r\n\r\n  if (on_select) {\r\n    var on_select_func = Function(on_select);\r\n  }\r\n  else {\r\n    var on_select_func = Function();\r\n  }\r\n\r\n  if (on_search) {\r\n    var on_search_func = Function(on_search);\r\n  }\r\n  else {\r\n    var on_search_func = Function();\r\n  }\r\n\r\n  if (defaultValue) {\r\n    var defaultValue_tree = defaultValue;\r\n  }\r\n  else {\r\n    var defaultValue_tree = undefined;\r\n  }\r\n\r\n  \r\n  const onChange = (newValue: string) => {\r\n    setValue(newValue);\r\n    Streamlit.setComponentValue(newValue);\r\n    on_change_func();\r\n  };\r\n\r\n  const onSelect = () => {\r\n    on_select_func();\r\n  };\r\n\r\n  const onSearch = () => {\r\n    on_search_func();\r\n  };\r\n\r\n\r\n  function onTreeExpand_func() {\r\n    //wait one seconds than execute find_dropdown\r\n    //timeout Function weil HTML Keys nicht schnell genug geupdatet werden..\r\n    setTimeout(function() {\r\n      var height = find_dropdown()\r\n\r\n      var set_height = 0;\r\n\r\n      if (height == 0) {\r\n        set_height = min_height_dropdown;\r\n      }\r\n      else {\r\n        set_height = height;\r\n      }\r\n      Streamlit.setFrameHeight(set_height);\r\n    }, 1);\r\n\r\n  }\r\n\r\n  //function to loop through treeData and parse the html if necessary\r\n  function loop_through_treeData(treeData: any) {\r\n    treeData.forEach((element: any) => {\r\n      //if element.title is a string\r\n      if (element.title && typeof element.title === \"string\")\r\n      {\r\n        element.title = parser(element.title)\r\n      }\r\n\r\n      //detect how many children the element has if those have children too without looping through them all \r\n      if (element.children) {\r\n        //if the element has children loop through them\r\n        loop_through_treeData(element.children)\r\n      }\r\n    });\r\n\r\n  }\r\nloop_through_treeData(treeData)\r\n\r\n\r\n\r\n  return (\r\n    <TreeSelect\r\n      id  = {key}\r\n      showSearch = {showSearch}\r\n      showArrow = {showArrow}\r\n      filterTreeNode = {filterTreeNode}\r\n      multiple = {multiple}\r\n      disabled = {disabled}\r\n      treeCheckable = {treeCheckable}\r\n      treeLine = {treeLine}\r\n      status= {status}\r\n      treeDefaultExpandedKeys = {treeDefaultExpandedKeys}\r\n      placement = \"bottomLeft\"\r\n      style={{ width: width_dropdown, marginTop: \"10px\" }}\r\n      onSearch={onSearch}\r\n      onSelect={onSelect}\r\n      defaultValue={defaultValue_tree}\r\n      value={value}\r\n      dropdownStyle={{ maxHeight: max_height, overflow: 'auto', width: width_dropdown }}\r\n      dropdownAlign = {{offset: [0, 0]}}\r\n      placeholder= {placeholder}\r\n      allowClear = {allowClear}\r\n      treeDefaultExpandAll = {treeDefaultExpandAll}\r\n      onChange={onChange}\r\n      treeData={treeData}\r\n      onDropdownVisibleChange={onDropdownVisibleChange}\r\n      onTreeExpand = {onTreeExpand_func}\r\n      maxTagCount = {maxTagCount}\r\n      onClear = {() => {Streamlit.setComponentValue(undefined)}}\r\n\r\n      //on clear\r\n      bordered = {bordered}\r\n\r\n\r\n    />\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default withStreamlitConnection(TreeComponent);\r\n","\r\nimport React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport TreeComponent from \"./AntTree\"\r\n\r\n// Lots of import to define a Styletron engine and load the light theme of baseui\r\n\r\n\r\n// Wrap your CustomSlider with the baseui them\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <TreeComponent />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)"],"sourceRoot":""}