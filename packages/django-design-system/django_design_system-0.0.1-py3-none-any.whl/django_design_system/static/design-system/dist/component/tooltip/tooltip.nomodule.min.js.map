{"version":3,"file":"tooltip.nomodule.min.js","sources":["../../../.config/config.js","../../../src/core/api.js","../../../src/component/tooltip/script/tooltip/tooltip-selector.js","../../../src/component/tooltip/script/tooltip/tooltip-referent.js","../../../src/core/script/api/utilities/namespace.js","../../../src/component/tooltip/script/tooltip/tooltip-event.js","../../../src/component/tooltip/script/tooltip/tooltip.js","../../../src/component/tooltip/index.js","../../../src/component/tooltip/main.js"],"sourcesContent":["const config = {\r\n  prefix: 'design-system',\r\n  namespace: 'design-system',\r\n  version: '0.0.3'\r\n};\r\n\r\nexport default config;\r\n","import config from './config.js';\nconst api = window[config.namespace];\nexport default api;\n","import api from '../../api.js';\n\nexport const TooltipSelector = {\n  TOOLTIP: api.internals.ns.selector('tooltip'),\n  SHOWN: api.internals.ns.selector('tooltip--shown'),\n  BUTTON: api.internals.ns.selector('btn--tooltip')\n};\n","import api from '../../api.js';\nimport { TooltipSelector } from './tooltip-selector';\n\nconst TooltipReferentState = {\n  FOCUS: 1 << 0,\n  HOVER: 1 << 1\n};\n\nclass TooltipReferent extends api.core.PlacementReferent {\n  constructor () {\n    super();\n    this._state = 0;\n  }\n\n  static get instanceClassName () {\n    return 'TooltipReferent';\n  }\n\n  init () {\n    super.init();\n    this.listen('focusin', this.focusIn.bind(this));\n    this.listen('focusout', this.focusOut.bind(this));\n    if (!this.matches(TooltipSelector.BUTTON)) {\n      const mouseover = this.mouseover.bind(this);\n      this.listen('mouseover', mouseover);\n      this.placement.listen('mouseover', mouseover);\n      const mouseout = this.mouseout.bind(this);\n      this.listen('mouseout', mouseout);\n      this.placement.listen('mouseout', mouseout);\n    }\n    this.addEmission(api.core.RootEmission.KEYDOWN, this._keydown.bind(this));\n    this.listen('click', this._click.bind(this));\n    this.addEmission(api.core.RootEmission.CLICK, this._clickOut.bind(this));\n  }\n\n  _click () {\n    this.focus();\n  }\n\n  _clickOut (target) {\n    if (!this.node.contains(target)) this.blur();\n  }\n\n  _keydown (keyCode) {\n    switch (keyCode) {\n      case api.core.KeyCodes.ESCAPE:\n        this.blur();\n        this.close();\n        break;\n    }\n  }\n\n  close () {\n    this.state = 0;\n  }\n\n  get state () {\n    return this._state;\n  }\n\n  set state (value) {\n    if (this._state === value) return;\n    this.isShown = value > 0;\n    this._state = value;\n  }\n\n  focusIn () {\n    this.state |= TooltipReferentState.FOCUS;\n  }\n\n  focusOut () {\n    this.state &= ~TooltipReferentState.FOCUS;\n  }\n\n  mouseover () {\n    this.state |= TooltipReferentState.HOVER;\n  }\n\n  mouseout () {\n    this.state &= ~TooltipReferentState.HOVER;\n  }\n}\n\nexport { TooltipReferent };\n","import config from '../../../config.js';\n\nconst ns = name => `${config.prefix}-${name}`;\n\nns.selector = (name, notation) => {\n  if (notation === undefined) notation = '.';\n  return `${notation}${ns(name)}`;\n};\n\nns.attr = (name) => `data-${ns(name)}`;\n\nns.attr.selector = (name, value) => {\n  let result = ns.attr(name);\n  if (value !== undefined) result += `=\"${value}\"`;\n  return `[${result}]`;\n};\n\nns.event = (type) => `${config.namespace}.${type}`;\n\nns.emission = (domain, type) => `emission:${domain}.${type}`;\n\nexport default ns;\n","import ns from '../../../../core/script/api/utilities/namespace.js';\n\nconst TooltipEvent = {\n  SHOW: ns.event('show'),\n  HIDE: ns.event('hide')\n};\n\nexport { TooltipEvent };\n","import api from '../../api.js';\nimport { TooltipReferent } from './tooltip-referent';\nimport { TooltipSelector } from './tooltip-selector';\nimport { TooltipEvent } from './tooltip-event.js';\n\nconst TooltipState = {\n  HIDDEN: 'hidden',\n  SHOWN: 'shown',\n  HIDING: 'hiding'\n};\n\nclass Tooltip extends api.core.Placement {\n  constructor () {\n    super(api.core.PlacementMode.AUTO, [api.core.PlacementPosition.TOP, api.core.PlacementPosition.BOTTOM], [api.core.PlacementAlign.CENTER, api.core.PlacementAlign.START, api.core.PlacementAlign.END]);\n    this.modifier = '';\n    this._state = TooltipState.HIDDEN;\n  }\n\n  static get instanceClassName () {\n    return 'Tooltip';\n  }\n\n  init () {\n    super.init();\n    this.register(`[aria-describedby=\"${this.id}\"]`, TooltipReferent);\n    this.listen('transitionend', this.transitionEnd.bind(this));\n  }\n\n  transitionEnd () {\n    if (this._state === TooltipState.HIDING) {\n      this._state = TooltipState.HIDDEN;\n      this.isShown = false;\n    }\n  }\n\n  get isShown () {\n    return super.isShown;\n  }\n\n  set isShown (value) {\n    if (!this.isEnabled) return;\n    switch (true) {\n      case value:\n        this._state = TooltipState.SHOWN;\n        this.addClass(TooltipSelector.SHOWN);\n        this.dispatch(TooltipEvent.SHOW);\n        super.isShown = true;\n        break;\n\n      case this.isShown && !value && this._state === TooltipState.SHOWN:\n        this._state = TooltipState.HIDING;\n        this.removeClass(TooltipSelector.SHOWN);\n        break;\n\n      case this.isShown && !value && this._state === TooltipState.HIDDEN:\n        this.dispatch(TooltipEvent.HIDE);\n        super.isShown = false;\n        break;\n    }\n  }\n\n  render () {\n    super.render();\n    let x = this.referentRect.center - this.rect.center;\n    const limit = this.rect.width * 0.5 - 8;\n    if (x < -limit) x = -limit;\n    if (x > limit) x = limit;\n    this.setProperty('--arrow-x', `${x.toFixed(2)}px`);\n  }\n}\n\nexport { Tooltip };\n","import api from './api.js';\nimport { Tooltip } from './script/tooltip/tooltip.js';\nimport { TooltipSelector } from './script/tooltip/tooltip-selector.js';\nimport { TooltipEvent } from './script/tooltip/tooltip-event';\n\napi.tooltip = {\n  Tooltip: Tooltip,\n  TooltipSelector: TooltipSelector,\n  TooltipEvent: TooltipEvent\n};\n\nexport default api;\n","import api from './index.js';\n\napi.internals.register(api.tooltip.TooltipSelector.TOOLTIP, api.tooltip.Tooltip);\n\nexport default api;\n"],"names":["const","config","api","window","TooltipSelector","TOOLTIP","internals","ns","selector","SHOWN","BUTTON","TooltipReferentState","TooltipReferent","superclass","super","this","_state","staticAccessors","instanceClassName","configurable","prototype","init","call","listen","focusIn","bind","focusOut","matches","mouseover","placement","mouseout","addEmission","core","RootEmission","KEYDOWN","_keydown","_click","CLICK","_clickOut","focus","target","node","contains","blur","keyCode","KeyCodes","ESCAPE","close","state","prototypeAccessors","set","value","isShown","PlacementReferent","name","notation","undefined","attr","let","result","event","type","emission","domain","TooltipEvent","SHOW","HIDE","TooltipState","Tooltip","PlacementMode","AUTO","PlacementPosition","TOP","BOTTOM","PlacementAlign","CENTER","START","END","modifier","register","transitionEnd","isEnabled","addClass","dispatch","removeClass","render","x","referentRect","center","rect","limit","width","setProperty","toFixed","Placement","tooltip"],"mappings":"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"}