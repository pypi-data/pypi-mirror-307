
{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}{% trans %}Create row{% endtrans %}{% endblock %}</h1>
{% endblock %}

{% block content %}
  <div class="flex-align">
    <fieldset>
      <legend>{% trans %}From an existing product.{% endtrans %}</legend>
      <form method="post">
        <label for="product_id">{% trans %}Product{% endtrans %}</label>
        <select name="product_id" id="product_id" {% if request.args.get('focus', 'from-existing') == 'from-existing' %}autofocus{% endif %}>
          {% for product in products %}
            <option value="{{ product.id }}">{{ product.label }} - {{ product.price/100 }}</option>
          {% endfor %}
        </select>
        <label for="quantity2">{% trans %}Quantity{% endtrans %}</label>
        <input name="quantity" id="quantity2" type="number" required>
        <div class="actions">
          <input type="submit" value="{% trans %}Create row{% endtrans %}">
          <label for="create_another">{% trans %}Create another?{% endtrans %}</label>
          <input name="create_another" id="create_another"
            {% if request.form.get('create_another') or request.args.get('create_another') %} checked{% endif %} type="checkbox">
        </div>
        {{ csrf_token()|safe }}
      </form>
    </fieldset>
    <fieldset>
      <legend>{% trans %}From scratch.{% endtrans %}</legend>
      <form action="{{ url_for('bill.create_row', id=bill['id']) }}" method="post">
        <label for="label">{% trans %}Label{% endtrans %}</label>
        <input name="label" id="label" required {% if request.args.get('focus') == 'from-scratch' %}autofocus{% endif %}>
        <label for="price">{% trans %}Price{% endtrans %}</label>
        <input name="price" id="price" type="number" step="0.01" required>
        <label for="tax_rate">{% trans %}Tax rate{% endtrans %}</label>
        <input name="tax_rate" id="tax_rate" type="number" step="0.01" max="100" min="0" required>
        <label for="quantity">{% trans %}Quantity{% endtrans %}</label>
        <input name="quantity" id="quantity" type="number" required>
    <div class="actions">
          <input type="submit" value="{% trans %}Create row{% endtrans %}">
          <label for="create_another">{% trans %}Create another?{% endtrans %}</label>
          <input name="create_another" id="create_another"
            {% if request.form.get('create_another') or request.args.get('create_another') %} checked{% endif %} type="checkbox">
        </div>
        {{ csrf_token()|safe }}
      </form>
    </fieldset>
  </div>
  <a href="{{ url_for('bill.update', id=bill['id'], _anchor="bill_rows") }}">{% trans %}Return{% endtrans %}</a>
{% endblock %}
