

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Working with data &mdash; Python reimplementation of NIXIO (http://g-node.github.io/nix/) 1.5.3 Release documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Annotations with arbitrary metadata" href="annotations.html" />
    <link rel="prev" title="Tagging points and regions" href="tagging.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/nix_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic_idea.html">Idea</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="standardization.html">Support for standardization</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nixio.readthedocs.io/en/master/use_cases.html">Use-cases</a></li>
</ul>
<p class="caption"><span class="caption-text">News</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="news.html">Changes in version 1.5</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="getting_started.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="file_handling.html">File handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="storing_data.html">Storing data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tagging.html">Tagging points and regions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tagging.html#handling-of-units">Handling of units</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Working with data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-data">Reading data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reading-all-data">Reading all data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-partial-data">Reading partial data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-tagged-data">Reading tagged data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html">Annotations with arbitrary metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="sources.html">Noting the origin of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="finding_things.html">Finding things</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_data.html">Image data</a></li>
<li class="toctree-l2"><a class="reference internal" href="spike_time_data.html">Spike time data</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Troubleshooting:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Getting support</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="user_api.html">High Level API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/nixio.html">Internal API</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="py-modindex.html">Module Index</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/g-node/nixpy">Sources on GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/G-Node/nixpy/blob/master/LICENSE">License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/G-Node/nix/blob/master/CONTRIBUTING.md">Contributing guide</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Python reimplementation of NIXIO (http://g-node.github.io/nix/)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="getting_started.html">Tutorials</a> &raquo;</li>
        
      <li>Working with data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/data_handling.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="annotations.html" class="btn btn-neutral float-right" title="Annotations with arbitrary metadata" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="tagging.html" class="btn btn-neutral float-left" title="Tagging points and regions" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="working-with-data">
<h1>Working with data<a class="headerlink" href="#working-with-data" title="Permalink to this headline">¶</a></h1>
<p>Storing data is one thing, but we want to work with it. The following examples illustrate reading of data from <em>DataArray</em>, <em>Tag</em> and <em>MultiTag</em> entities. We will use the dummy dataset already used in the <a class="reference internal" href="tagging.html"><span class="doc">tagging</span></a> example. The figure below shows what is stored in the dataset.</p>
<div class="figure align-default">
<img alt="a system's response to a stimulus" src="_images/tag1.png" />
</div>
<p>At some instance in time a system was exposed to a stimulus that leads to the system’s response. The response has been recorded and stored in a <em>DataArray</em>, a <em>Tag</em> is used to highlight the “stimulus-on” segment of the data.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="_downloads/26ca6cd639d5d3cb57648a70892c763f/tagging_example.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">code</span></code></a></span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">time</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">response</span> <span class="o">=</span> <span class="n">create_data</span><span class="p">()</span>

    <span class="n">f</span> <span class="o">=</span> <span class="n">nixio</span><span class="o">.</span><span class="n">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;tagging1.nix&quot;</span><span class="p">,</span> <span class="n">nixio</span><span class="o">.</span><span class="n">FileMode</span><span class="o">.</span><span class="n">Overwrite</span><span class="p">)</span>
    <span class="n">block</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_block</span><span class="p">(</span><span class="s2">&quot;demo block&quot;</span><span class="p">,</span> <span class="s2">&quot;nix.demo&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">create_data_array</span><span class="p">(</span><span class="s2">&quot;response&quot;</span><span class="p">,</span> <span class="s2">&quot;nix.sampled&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;voltage&quot;</span>
    <span class="n">data</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="s2">&quot;mV&quot;</span>

    <span class="n">data</span><span class="o">.</span><span class="n">append_sampled_dimension</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;s&quot;</span><span class="p">)</span>

    <span class="n">stim_tag</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">create_tag</span><span class="p">(</span><span class="s2">&quot;stimulus&quot;</span><span class="p">,</span> <span class="s2">&quot;nix.stimulus_segment&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="n">stim_on</span><span class="p">])</span>
    <span class="n">stim_tag</span><span class="o">.</span><span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="n">stim_off</span> <span class="o">-</span> <span class="n">stim_on</span><span class="p">]</span>
    <span class="n">stim_tag</span><span class="o">.</span><span class="n">references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>In this example we know the interesting entities by name, i.e. the
<em>DataArray</em> is called <strong>response</strong> and the <em>Tag</em> is called <strong>stimulus</strong>.
In cases in which we have no clue about the names, we just have to
browse the file or <a class="reference external" href="./finding_things.md">search</a> by name or type.</p>
<div class="section" id="reading-data">
<h2>Reading data<a class="headerlink" href="#reading-data" title="Permalink to this headline">¶</a></h2>
<p>The first and maybe most common problem is to read the data stored in a
<em>DataArray</em>.</p>
<div class="section" id="reading-all-data">
<h3>Reading all data<a class="headerlink" href="#reading-all-data" title="Permalink to this headline">¶</a></h3>
<p>In <em>NIX</em> when you open a <em>DataArray</em> the stored data is <strong>not</strong> automatically read from file. This keeps the object lightweight and easy to create. To read the data you can simply access it in a numpy style:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="_downloads/26ca6cd639d5d3cb57648a70892c763f/tagging_example.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">code</span></code></a></span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="nb">print</span><span class="p">(</span><span class="n">data_array</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data_array</span><span class="p">[:]</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">data_array</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>There are a few noteworthy things:</p>
<ul class="simple">
<li><p>We use some previous knowledge here. For one, we know the names of the entities. Further, we know that the data is 1-D and the single dimension is a <code class="docutils literal notranslate"><span class="pre">SampledDimension</span></code>. If these things are not known, the NIX library offers the necessary functions to get this information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataArray.shape</span></code> returns a tuple with the data shape.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataArray.dtype</span></code> returns the data type.</p></li>
<li><p>To find out the <code class="docutils literal notranslate"><span class="pre">DimensionType</span></code>, we need to access the dimension:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">data_array</span><span class="o">.</span><span class="n">dimensions</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">dimension_type</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-partial-data">
<h3>Reading partial data<a class="headerlink" href="#reading-partial-data" title="Permalink to this headline">¶</a></h3>
<p>In other instances it might be wanted to read only parts of the data.
Reading slices of the data is straight forward using the numpy style.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="_downloads/26ca6cd639d5d3cb57648a70892c763f/tagging_example.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">code</span></code></a></span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># let&#39;s read the 101 to 1000th element of the data</span>
    <span class="n">partial_data</span> <span class="o">=</span> <span class="n">data_array</span><span class="p">[</span><span class="mi">100</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">data_array</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="mi">900</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">partial_data</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>An alternative approach is to use the <code class="docutils literal notranslate"><span class="pre">DataArray.get_slice</span></code> method which by default works with indices but can also work in data coordinates. E.g. we know that the data is 1-D and covers a span of 3.5s and we want to have the data in the interval 0.5s through 1.75s. The method returns a <code class="docutils literal notranslate"><span class="pre">nixio.DataView</span></code> object. The actual reading is done by accessing the data.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><a class="reference download internal" download="" href="_downloads/26ca6cd639d5d3cb57648a70892c763f/tagging_example.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">code</span></code></a></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># using the get_slice method to get the data in the interval 0.5 to 1.75 s</span>
    <span class="n">partial_data</span> <span class="o">=</span> <span class="n">data_array</span><span class="o">.</span><span class="n">get_slice</span><span class="p">([</span><span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.25</span><span class="p">],</span> <span class="n">nixio</span><span class="o">.</span><span class="n">DataSliceMode</span><span class="o">.</span><span class="n">Data</span><span class="p">)[:]</span>
<span class="hll">    <span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">1.25</span><span class="p">,</span> <span class="n">data_array</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sampling_interval</span><span class="p">)</span>
</span>    <span class="nb">print</span><span class="p">(</span><span class="n">partial_data</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>The arguments <code class="docutils literal notranslate"><span class="pre">positions</span></code> and <code class="docutils literal notranslate"><span class="pre">extents</span></code> are passed as lists. There must be one entry for each dimension of the data. In this case, since the data is 1-D, positions and extents are 1-element lists.
Note: the slice is defined by the starting point(s) and the <em>extent(s)</em>, not with start and end points.</p>
</div>
<div class="section" id="reading-tagged-data">
<h3>Reading tagged data<a class="headerlink" href="#reading-tagged-data" title="Permalink to this headline">¶</a></h3>
<p><em>Tag</em> and <em>MultiTag</em> tag single or multiple points or regions in data stored in the referenced <em>DataArrays</em> (see <a class="reference external" href="./tagging.md">tagging</a> for more information and the example data created in the <a class="reference external" href="#mtag_regions">example</a>  will be used in the following code snippets).</p>
<div class="figure align-default" id="id5">
<img alt="tagging multiple segments" src="_images/multiple_regions.png" />
<p class="caption"><span class="caption-text">Plot of the data created by this <a class="reference download internal" download="" href="_downloads/96c0269701ff525e099cdc0b1d75ffc4/multiple_regions.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span></code></a> on tagging multiple regions in data.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>In order to read the data that belongs to the highlighted region(s) <em>Tag</em> and <em>MultiTag</em> define the <code class="docutils literal notranslate"><span class="pre">tagged_data</span></code> methods which return <code class="docutils literal notranslate"><span class="pre">nixio.DataView</span></code> objects from which the data is read as shown above. The following code snippet shows how to use these function:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Reading data segments tagged by the <em>Tag</em> or <em>MultiTag</em> can be done using the <code class="docutils literal notranslate"><span class="pre">tagged_data</span></code> method (<a class="reference download internal" download="" href="_downloads/96c0269701ff525e099cdc0b1d75ffc4/multiple_regions.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">code</span></code></a>).</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="n">block</span> <span class="o">=</span> <span class="n">nixfile</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">mtag</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">multi_tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">signal_da</span> <span class="o">=</span> <span class="n">mtag</span><span class="o">.</span><span class="n">references</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">]</span>
    <span class="n">signal_dim</span> <span class="o">=</span> <span class="n">signal_da</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">xlabel</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">signal_dim</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">signal_dim</span><span class="o">.</span><span class="n">unit</span> <span class="k">if</span> <span class="n">signal_dim</span><span class="o">.</span><span class="n">unit</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">signal_da</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="s2">&quot;[</span><span class="si">%s</span><span class="s2">]&quot;</span> <span class="o">%</span> <span class="n">signal_da</span><span class="o">.</span><span class="n">unit</span> <span class="k">if</span> <span class="n">signal_da</span><span class="o">.</span><span class="n">unit</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">5.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">))</span>
    <span class="n">num_segments</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mtag</span><span class="o">.</span><span class="n">positions</span><span class="p">[:])</span>
<span class="hll">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_segments</span><span class="p">):</span>
</span>        <span class="n">data</span> <span class="o">=</span> <span class="n">mtag</span><span class="o">.</span><span class="n">tagged_data</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s2">&quot;signal&quot;</span><span class="p">)[:]</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">signal_dim</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">start_position</span><span class="o">=</span><span class="n">mtag</span><span class="o">.</span><span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>The <em>MultiTag</em> version of the <code class="docutils literal notranslate"><span class="pre">tagged_data</span></code> method takes two arguments. The first is the index of the tagged region (0 for the first), the second argument is the name of the referenced <em>DataArray</em> (you can also use the index or the id). Since the <em>Tag</em> tags only a single region, it takes only one argument, i.e. the name (id, index) of the referenced <em>DataArray</em>.</p>
<div class="figure align-default">
<img alt="reading tagged data" src="_images/reading_tagged_data.png" />
</div>
<p>Analogously, the feature data attached to the <em>Tag</em> or <em>MultiTag</em> can be
obtained using the <code class="docutils literal notranslate"><span class="pre">feature_data</span></code> methods.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text"><code class="docutils literal notranslate"><span class="pre">feature_data</span></code> works analogously, the first argument is the index of the tagged region, the second the name (or id or index) of the feature. Here the feature stores a single number, i.e. the frequency of the stimulus for each tagged region which is plotted below the highlighted regions in the figure above (<a class="reference download internal" download="" href="_downloads/96c0269701ff525e099cdc0b1d75ffc4/multiple_regions.py"><code class="xref download docutils literal notranslate"><span class="pre">example</span> <span class="pre">code</span></code></a>).</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">interval</span><span class="p">,</span> <span class="n">extent</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">mtag</span><span class="o">.</span><span class="n">positions</span><span class="p">[:],</span> <span class="n">mtag</span><span class="o">.</span><span class="n">extents</span><span class="p">[:])):</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">((</span><span class="n">interval</span><span class="p">,</span> <span class="mf">1.05</span><span class="p">),</span> <span class="n">extent</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
                                 <span class="n">facecolor</span><span class="o">=</span><span class="s2">&quot;silver&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">interval</span> <span class="o">+</span> <span class="n">extent</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.25</span><span class="p">,</span>
<span class="hll">                <span class="s2">&quot;</span><span class="si">%.1f</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">mtag</span><span class="o">.</span><span class="n">feature_data</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s2">&quot;stimulus frequency&quot;</span><span class="p">)[:],</span>
</span><span class="hll">                             <span class="n">mtag</span><span class="o">.</span><span class="n">features</span><span class="p">[</span><span class="s2">&quot;stimulus frequency&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">unit</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
</span>    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="n">l</span><span class="p">,</span> <span class="n">rect</span><span class="p">),</span> <span class="p">(</span><span class="n">signal_da</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">mtag</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="annotations.html" class="btn btn-neutral float-right" title="Annotations with arbitrary metadata" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tagging.html" class="btn btn-neutral float-left" title="Tagging points and regions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2014-2021, German Neuroinformatics Node, Christian Kellner, Adrian Stoewer, Andrey Sobolev, Jan Grewe, Balint Morvai, Achilleas Koutsou.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>