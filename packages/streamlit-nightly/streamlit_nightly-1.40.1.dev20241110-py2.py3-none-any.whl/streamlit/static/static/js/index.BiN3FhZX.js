import{n as k,r as a,I as H,bW as f,a4 as R,j as u,aX as U,b8 as z,aY as L,aH as B,aZ as D,bY as j}from"./index.qhZ3u-nj.js";import{u as w}from"./uniqueId.DAZZv27E.js";import{a as _}from"./useBasicWidgetState.CAOQiQN2.js";import{I as O}from"./InputInstructions.BxyboLOw.js";import{I as Y}from"./input.2ejAVBLR.js";import"./FormClearHelper.C2WxaVb8.js";import"./base-input.Bc8vKQKp.js";const q=k("div",{target:"e6m0wlp0"})(({width:e})=>({position:"relative",width:e}));function ot({disabled:e,element:t,widgetMgr:i,width:n,fragmentId:d}){var I;const[l,c]=_({getStateFromWidgetMgr:A,getDefaultStateFromProto:G,getCurrStateFromProto:K,updateWidgetMgrState:N,element:t,widgetMgr:i,fragmentId:d}),[r,T]=a.useState(!1),[y,h]=a.useState(!1),[s,b]=a.useState(l);a.useEffect(()=>{l!==s&&b(l)},[l]);const o=H(),[g]=a.useState(()=>w("text_input_")),{placeholder:x,formId:S}=t,v=f({formId:S})?i.allowFormEnterToSubmit(S):r,F=y&&n>o.breakpoints.hideWidgetDetails,V=a.useCallback(()=>{r&&c({value:s,fromUi:!0}),h(!1)},[r,s]),C=a.useCallback(()=>{h(!0)},[]),E=a.useCallback(p=>{const{value:m}=p.target,{maxChars:W}=t;W!==0&&m.length>W||(T(!0),b(m),f(t)&&c({value:m,fromUi:!0}))},[t]),P=a.useCallback(p=>{p.key==="Enter"&&(r&&c({value:s,fromUi:!0}),i.allowFormEnterToSubmit(t.formId)&&i.submitForm(t.formId,d))},[s,t,d]);return R(q,{className:"stTextInput","data-testid":"stTextInput",width:n,children:[u(D,{label:t.label,disabled:e,labelVisibility:U((I=t.labelVisibility)==null?void 0:I.value),htmlFor:g,children:t.help&&u(z,{children:u(L,{content:t.help,placement:B.TOP_RIGHT})})}),u(Y,{value:s??"",placeholder:x,onBlur:V,onFocus:C,onChange:E,onKeyPress:P,"aria-label":t.label,disabled:e,id:g,type:X(t),autoComplete:t.autocomplete,overrides:{Input:{style:{minWidth:0,"::placeholder":{opacity:"0.7"},lineHeight:o.lineHeights.inputWidget,paddingRight:o.spacing.sm,paddingLeft:o.spacing.sm,paddingBottom:o.spacing.sm,paddingTop:o.spacing.sm}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:o.sizes.minElementHeight,borderLeftWidth:o.sizes.borderWidth,borderRightWidth:o.sizes.borderWidth,borderTopWidth:o.sizes.borderWidth,borderBottomWidth:o.sizes.borderWidth}}}}),F&&u(O,{dirty:r,value:s??"",maxLength:t.maxChars,inForm:f({formId:t.formId}),allowEnterToSubmit:v})]})}function A(e,t){return e.getStringValue(t)??null}function G(e){return e.default??null}function K(e){return e.value??null}function N(e,t,i,n){t.setStringValue(e,i.value,{fromUi:i.fromUi},n)}function X(e){return e.type===j.Type.PASSWORD?"password":"text"}export{ot as default};
//# sourceMappingURL=index.BiN3FhZX.js.map
