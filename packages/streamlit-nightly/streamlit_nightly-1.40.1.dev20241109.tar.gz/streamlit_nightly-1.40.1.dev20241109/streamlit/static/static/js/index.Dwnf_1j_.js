import{r as o,I as B,bW as C,a4 as K,j as d,aX as U,b8 as j,aY as _,aH as $,aZ as q}from"./index.qhZ3u-nj.js";import{u as G}from"./uniqueId.DAZZv27E.js";import{I as N}from"./InputInstructions.BxyboLOw.js";import{a as O}from"./useBasicWidgetState.CAOQiQN2.js";import{T as X}from"./textarea.9AbK7hsG.js";import"./FormClearHelper.C2WxaVb8.js";import"./base-input.Bc8vKQKp.js";const F=(a,t)=>a.getStringValue(t)??t.default??null,Y=a=>a.default??null,Z=a=>a.value??null,w=(a,t,r,u)=>{t.setStringValue(a,r.value,{fromUi:r.fromUi},u)},J=({disabled:a,element:t,widgetMgr:r,fragmentId:u,width:g})=>{var x;const f=o.useRef(G("text_area_")).current,[m,T]=o.useState(F(r,t)??null),[l,h]=o.useState(!1),[v,y]=o.useState(!1),E=o.useCallback(()=>{T(t.default??null),h(!0)},[t]),[,W]=O({getStateFromWidgetMgr:F,getDefaultStateFromProto:Y,getCurrStateFromProto:Z,updateWidgetMgrState:w,element:t,widgetMgr:r,fragmentId:u,onFormCleared:E}),e=B(),p=o.useCallback(({fromUi:s})=>{W({value:m,fromUi:s}),h(!1)},[m,W]),I=o.useCallback(()=>{l&&p({fromUi:!0}),y(!1)},[l,p]),V=o.useCallback(()=>{y(!0)},[]),k=o.useCallback(s=>{const{value:i}=s.target,{maxChars:n}=t;n!==0&&i.length>n||(T(i),h(!0))},[t]),H=s=>{var c;const{keyCode:i,key:n}=s;return(n==="Enter"||i===13||i===10)&&((c=s.nativeEvent)==null?void 0:c.isComposing)!==!0},z=o.useCallback(s=>{const{metaKey:i,ctrlKey:n}=s,{formId:c}=t,D=r.allowFormEnterToSubmit(c);H(s)&&(n||i)&&l&&(s.preventDefault(),p({fromUi:!0}),D&&r.submitForm(c,u))},[t,r,l,p,u]),L={width:g},{height:S,placeholder:P,formId:b}=t,R=C({formId:b})?r.allowFormEnterToSubmit(b):l,A=v&&g>e.breakpoints.hideWidgetDetails;return K("div",{className:"stTextArea","data-testid":"stTextArea",style:L,children:[d(q,{label:t.label,disabled:a,labelVisibility:U((x=t.labelVisibility)==null?void 0:x.value),htmlFor:f,children:t.help&&d(j,{children:d(_,{content:t.help,placement:$.TOP_RIGHT})})}),d(X,{value:m??"",placeholder:P,onBlur:I,onFocus:V,onChange:k,onKeyDown:z,"aria-label":t.label,disabled:a,id:f,overrides:{Input:{style:{lineHeight:e.lineHeights.inputWidget,height:S?`${S}px`:"",minHeight:e.sizes.largestElementHeight,resize:"vertical","::placeholder":{opacity:"0.7"},paddingRight:e.spacing.lg,paddingLeft:e.spacing.lg,paddingBottom:e.spacing.lg,paddingTop:e.spacing.lg}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth}}}}),A&&d(N,{dirty:l,value:m??"",maxLength:t.maxChars,type:"multiline",inForm:C({formId:b}),allowEnterToSubmit:R})]})},rt=o.memo(J);export{rt as default};
//# sourceMappingURL=index.Dwnf_1j_.js.map
