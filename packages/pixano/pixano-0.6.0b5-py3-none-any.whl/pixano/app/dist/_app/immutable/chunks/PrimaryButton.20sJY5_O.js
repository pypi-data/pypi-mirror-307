import{D as oe,h as ie,i as re,c as I,j as O}from"./command.DMj7cpMB.js";import{J as ue,s as w,p as v,i as D,f as y,y as S,m as k,z as R,a5 as _,l as T,e as W,c as q,b as F,a6 as j,I as p,u as E,v as z,w as N,L as G,N as ce,R as fe}from"./scheduler.BniYn1SZ.js";import{S as P,i as A,g as de,a as g,e as me,t as b,c as H,b as K,m as Q,d as X}from"./index.CyDiftoh.js";import{g as M,a as he}from"./datasetStores.CSqjjVBP.js";class L extends Map{constructor(e,a=ge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[s,n]of e)this.set(s,n)}get(e){return super.get(V(this,e))}has(e){return super.has(V(this,e))}set(e,a){return super.set(_e(this,e),a)}delete(e){return super.delete(pe(this,e))}}function V({_intern:t,_key:e},a){const s=e(a);return t.has(s)?t.get(s):a}function _e({_intern:t,_key:e},a){const s=e(a);return t.has(s)?t.get(s):(t.set(s,a),a)}function pe({_intern:t,_key:e},a){const s=e(a);return t.has(s)&&(a=t.get(s),t.delete(s)),a}function ge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function be(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const J=Symbol("implicit");function Y(){var t=new L,e=[],a=[],s=J;function n(l){let o=t.get(l);if(o===void 0){if(s!==J)return s;t.set(l,o=e.push(l)-1)}return a[o%a.length]}return n.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new L;for(const o of l)t.has(o)||t.set(o,e.push(o)-1);return n},n.range=function(l){return arguments.length?(a=Array.from(l),n):a.slice()},n.unknown=function(l){return arguments.length?(s=l,n):s},n.copy=function(){return Y(e,a).unknown(s)},be.apply(n,arguments),n}function ye(t){for(var e=t.length/6|0,a=new Array(e),s=0;s<e;)a[s]="#"+t.slice(s*6,++s*6);return a}const ke=ye("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Je(t){return Y(ke).domain(t)}function ve(t,e,a){const s=[];let n=[],l=0;for(const o of t){const r=n.length?e+o:o,i=l+r.length;i>a?(s.push(n.join(e)),n=[o],l=o.length):(n.push(o),l=i)}return n.length&&s.push(n.join(e)),s}async function Ue(){let t,e;try{const a=await fetch("/datasets/info");a.ok?(t=await a.json(),e=t.map(s=>new re(s))):(e=[],console.log("api.getDatasetsInfo -",a.status,a.statusText,await a.text()))}catch(a){e=[],console.log("api.getDatasetsInfo -",a)}return e}async function Re(t){let e;try{const a=await fetch(`/datasets/${t}`);a.ok?e=await a.json():(e={},console.log("api.getDataset -",a.status,a.statusText,await a.text()))}catch(a){e={},console.log("api.getDataset -",a)}return e}async function We(t,e=1,a=100,s){let n,l,o="";s&&s.model!==""&&s.search!==""&&(o=`&query=${s.search}&embedding_table=${s.model}`);try{const r=await fetch(`/browser/${t}/?skip=${(e-1)*a}&limit=${a}${o}`);r.ok?(l=await r.json(),n=new oe(l)):(n={},console.log("api.getBrowser -",r.status,r.statusText,await r.text()))}catch(r){n={},console.log("api.getBrowser -",r)}return n}async function qe(t){const e=[];for(let s=0;;s+=1e3)try{const n=await fetch(`/items/${t}/?limit=1000&skip=${s}`);if(n.ok){const l=await n.json();if(e.push(...l.map(o=>o.id)),l&&l.length<1e3)break}else{n.status!=404&&console.log("api.getDatasetItemsIds -",n.status,n.statusText,await n.text());break}}catch(n){console.log("api.getDatasetItemsIds -",n)}return e}async function Fe(t,e){let a,s;const n=Date.now();try{const l=await fetch(`/dataset_items/${t}/${e}`);l.ok?(a=await l.json(),s=new ie(a)):(s={},console.log("api.getDatasetItem -",l.status,l.statusText,await l.text()))}catch(l){s={},console.log("api.getDatasetItem -",l)}return console.log("api.getDatasetItem - Done in",Date.now()-n),s}async function Ge(t,e,a){let s;try{const n=await fetch(`/embeddings/${t}/${a}/?item_ids=${e}`);n.ok?s=await n.json():(s=[],console.log("api.getViewEmbeddings -",n.status,n.statusText,await n.text()))}catch(n){s=[],console.log("api.getViewEmbeddings -",n)}return s}async function He(t,e,a,s,n){const l=n?`/${t}/${e}/?ids=`:`/${t}/${e}/${s}/?ids=`,o=ve(a,"&ids=",8e3);await Promise.all(o.map(async r=>{const i=l+r;try{const d=await fetch(i,{method:"DELETE"});d.ok||console.log("api.deleteSchema -",d.status,d.statusText,await d.text())}catch(d){console.log("api.deleteSchema -",d)}}))}async function Ke(t,e,a,s){const n=s?`/${t}/${e}/${a.id}`:`/${t}/${e}/${a.table_info.name}/${a.id}`;try{const l=await fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)});l.ok||console.log("api.addSchema -",l.status,l.statusText,await l.text())}catch(l){console.log("api.addSchema -",l)}}async function Qe(t,e,a,s){const n=s?`/${t}/${e}/${a.id}`:`/${t}/${e}/${a.table_info.name}/${a.id}`;try{const l=await fetch(n,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(a)});l.ok||console.log("api.updateSchema -",l.status,l.statusText,await l.text())}catch(l){console.log("api.updateSchema -",l)}}async function Xe(){let t;try{const e=await fetch("/models");e.ok?t=await e.json():(t=[],console.log("api.getModels -",e.status,e.statusText))}catch(e){t=[],console.log("api.getModels -",e)}return t}function Ye(){const t=ue();return e=>{const{originalEvent:a}=e.detail,{cancelable:s}=e,n=a.type;t(n,{originalEvent:a,currentTarget:a.currentTarget},{cancelable:s})||e.preventDefault()}}function we(t,e){const a=[];return e.builders.forEach(s=>{const n=s.action(t);n&&a.push(n)}),{destroy:()=>{a.forEach(s=>{s.destroy&&s.destroy()})}}}function U(t){const e={};return t.forEach(a=>{Object.keys(a).forEach(s=>{s!=="action"&&(e[s]=a[s])})}),e}function De(t){let e=t[0]?"a":"button",a,s,n=(t[0]?"a":"button")&&B(t);return{c(){n&&n.c(),a=v()},l(l){n&&n.l(l),a=v()},m(l,o){n&&n.m(l,o),D(l,a,o),s=!0},p(l,o){l[0],e?w(e,l[0]?"a":"button")?(n.d(1),n=B(l),e=l[0]?"a":"button",n.c(),n.m(a.parentNode,a)):n.p(l,o):(n=B(l),e=l[0]?"a":"button",n.c(),n.m(a.parentNode,a))},i(l){s||(b(n,l),s=!0)},o(l){g(n,l),s=!1},d(l){l&&y(a),n&&n.d(l)}}}function Ie(t){let e=t[0]?"a":"button",a,s,n=(t[0]?"a":"button")&&C(t);return{c(){n&&n.c(),a=v()},l(l){n&&n.l(l),a=v()},m(l,o){n&&n.m(l,o),D(l,a,o),s=!0},p(l,o){l[0],e?w(e,l[0]?"a":"button")?(n.d(1),n=C(l),e=l[0]?"a":"button",n.c(),n.m(a.parentNode,a)):n.p(l,o):(n=C(l),e=l[0]?"a":"button",n.c(),n.m(a.parentNode,a))},i(l){s||(b(n,l),s=!0)},o(l){g(n,l),s=!1},d(l){l&&y(a),n&&n.d(l)}}}function B(t){let e,a,s,n,l;const o=t[6].default,r=T(o,t,t[5],null);let i=[{type:a=t[0]?void 0:t[1]},{href:t[0]},{tabindex:"0"},t[4],t[3]],d={};for(let c=0;c<i.length;c+=1)d=k(d,i[c]);return{c(){e=W(t[0]?"a":"button"),r&&r.c(),this.h()},l(c){e=q(c,((t[0]?"a":"button")||"null").toUpperCase(),{type:!0,href:!0,tabindex:!0});var u=F(e);r&&r.l(u),u.forEach(y),this.h()},h(){j(t[0]?"a":"button")(e,d)},m(c,u){D(c,e,u),r&&r.m(e,null),s=!0,n||(l=[p(e,"click",t[13]),p(e,"change",t[14]),p(e,"keydown",t[15]),p(e,"keyup",t[16]),p(e,"mouseenter",t[17]),p(e,"mouseleave",t[18])],n=!0)},p(c,u){r&&r.p&&(!s||u&32)&&E(r,o,c,c[5],s?N(o,c[5],u,null):z(c[5]),null),j(c[0]?"a":"button")(e,d=M(i,[(!s||u&3&&a!==(a=c[0]?void 0:c[1]))&&{type:a},(!s||u&1)&&{href:c[0]},{tabindex:"0"},u&16&&c[4],c[3]]))},i(c){s||(b(r,c),s=!0)},o(c){g(r,c),s=!1},d(c){c&&y(e),r&&r.d(c),n=!1,G(l)}}}function C(t){let e,a,s,n,l,o;const r=t[6].default,i=T(r,t,t[5],null);let d=[{type:a=t[0]?void 0:t[1]},{href:t[0]},{tabindex:"0"},U(t[2]),t[4],t[3]],c={};for(let u=0;u<d.length;u+=1)c=k(c,d[u]);return{c(){e=W(t[0]?"a":"button"),i&&i.c(),this.h()},l(u){e=q(u,((t[0]?"a":"button")||"null").toUpperCase(),{type:!0,href:!0,tabindex:!0});var h=F(e);i&&i.l(h),h.forEach(y),this.h()},h(){j(t[0]?"a":"button")(e,c)},m(u,h){D(u,e,h),i&&i.m(e,null),n=!0,l||(o=[p(e,"click",t[7]),p(e,"change",t[8]),p(e,"keydown",t[9]),p(e,"keyup",t[10]),p(e,"mouseenter",t[11]),p(e,"mouseleave",t[12]),ce(s=we.call(null,e,{builders:t[2]}))],l=!0)},p(u,h){i&&i.p&&(!n||h&32)&&E(i,r,u,u[5],n?N(r,u[5],h,null):z(u[5]),null),j(u[0]?"a":"button")(e,c=M(d,[(!n||h&3&&a!==(a=u[0]?void 0:u[1]))&&{type:a},(!n||h&1)&&{href:u[0]},{tabindex:"0"},h&4&&U(u[2]),h&16&&u[4],u[3]])),s&&fe(s.update)&&h&4&&s.update.call(null,{builders:u[2]})},i(u){n||(b(i,u),n=!0)},o(u){g(i,u),n=!1},d(u){u&&y(e),i&&i.d(u),l=!1,G(o)}}}function Se(t){let e,a,s,n;const l=[Ie,De],o=[];function r(i,d){return i[2]&&i[2].length?0:1}return e=r(t),a=o[e]=l[e](t),{c(){a.c(),s=v()},l(i){a.l(i),s=v()},m(i,d){o[e].m(i,d),D(i,s,d),n=!0},p(i,[d]){let c=e;e=r(i),e===c?o[e].p(i,d):(de(),g(o[c],1,1,()=>{o[c]=null}),me(),a=o[e],a?a.p(i,d):(a=o[e]=l[e](i),a.c()),b(a,1),a.m(s.parentNode,s))},i(i){n||(b(a),n=!0)},o(i){g(a),n=!1},d(i){i&&y(s),o[e].d(i)}}}function je(t,e,a){const s=["href","type","builders"];let n=S(e,s),{$$slots:l={},$$scope:o}=e,{href:r=void 0}=e,{type:i=void 0}=e,{builders:d=[]}=e;const c={"data-bits-button-root":""};function u(f){_.call(this,t,f)}function h(f){_.call(this,t,f)}function m(f){_.call(this,t,f)}function Z(f){_.call(this,t,f)}function $(f){_.call(this,t,f)}function x(f){_.call(this,t,f)}function ee(f){_.call(this,t,f)}function te(f){_.call(this,t,f)}function ne(f){_.call(this,t,f)}function se(f){_.call(this,t,f)}function ae(f){_.call(this,t,f)}function le(f){_.call(this,t,f)}return t.$$set=f=>{e=k(k({},e),R(f)),a(4,n=S(e,s)),"href"in f&&a(0,r=f.href),"type"in f&&a(1,i=f.type),"builders"in f&&a(2,d=f.builders),"$$scope"in f&&a(5,o=f.$$scope)},[r,i,d,c,n,o,l,u,h,m,Z,$,x,ee,te,ne,se,ae,le]}let Te=class extends P{constructor(e){super(),A(this,e,je,Se,w,{href:0,type:1,builders:2})}};function Ee(t){let e;const a=t[5].default,s=T(a,t,t[8],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,l){s&&s.m(n,l),e=!0},p(n,l){s&&s.p&&(!e||l&256)&&E(s,a,n,n[8],e?N(a,n[8],l,null):z(n[8]),null)},i(n){e||(b(s,n),e=!0)},o(n){g(s,n),e=!1},d(n){s&&s.d(n)}}}function ze(t){let e,a;const s=[{builders:t[3]},{class:I(O({variant:t[1],size:t[2],className:t[0]}))},{type:"button"},t[4]];let n={$$slots:{default:[Ee]},$$scope:{ctx:t}};for(let l=0;l<s.length;l+=1)n=k(n,s[l]);return e=new Te({props:n}),e.$on("click",t[6]),e.$on("keydown",t[7]),{c(){H(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,o){Q(e,l,o),a=!0},p(l,[o]){const r=o&31?M(s,[o&8&&{builders:l[3]},o&7&&{class:I(O({variant:l[1],size:l[2],className:l[0]}))},s[2],o&16&&he(l[4])]):{};o&256&&(r.$$scope={dirty:o,ctx:l}),e.$set(r)},i(l){a||(b(e.$$.fragment,l),a=!0)},o(l){g(e.$$.fragment,l),a=!1},d(l){X(e,l)}}}function Ne(t,e,a){const s=["class","variant","size","builders"];let n=S(e,s),{$$slots:l={},$$scope:o}=e,{class:r=void 0}=e,{variant:i="default"}=e,{size:d="default"}=e,{builders:c=[]}=e;function u(m){_.call(this,t,m)}function h(m){_.call(this,t,m)}return t.$$set=m=>{e=k(k({},e),R(m)),a(4,n=S(e,s)),"class"in m&&a(0,r=m.class),"variant"in m&&a(1,i=m.variant),"size"in m&&a(2,d=m.size),"builders"in m&&a(3,c=m.builders),"$$scope"in m&&a(8,o=m.$$scope)},[r,i,d,c,n,l,u,h,o]}class Be extends P{constructor(e){super(),A(this,e,Ne,ze,w,{class:0,variant:1,size:2,builders:3})}}function Ce(t){let e;const a=t[2].default,s=T(a,t,t[4],null);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,l){s&&s.m(n,l),e=!0},p(n,l){s&&s.p&&(!e||l&16)&&E(s,a,n,n[4],e?N(a,n[4],l,null):z(n[4]),null)},i(n){e||(b(s,n),e=!0)},o(n){g(s,n),e=!1},d(n){s&&s.d(n)}}}function Pe(t){let e,a;return e=new Be({props:{disabled:t[1],class:I("font-medium h-10 px-6 border rounded-full transition-colors flex gap-2 ",{"bg-primary hover:bg-primary-foreground border-primary hover:border-primary-foreground text-slate-50":t[0],"bg-white border-primary text-primary hover:bg-primary-light":!t[0]}),$$slots:{default:[Ce]},$$scope:{ctx:t}}}),e.$on("click",t[3]),{c(){H(e.$$.fragment)},l(s){K(e.$$.fragment,s)},m(s,n){Q(e,s,n),a=!0},p(s,[n]){const l={};n&2&&(l.disabled=s[1]),n&1&&(l.class=I("font-medium h-10 px-6 border rounded-full transition-colors flex gap-2 ",{"bg-primary hover:bg-primary-foreground border-primary hover:border-primary-foreground text-slate-50":s[0],"bg-white border-primary text-primary hover:bg-primary-light":!s[0]})),n&16&&(l.$$scope={dirty:n,ctx:s}),e.$set(l)},i(s){a||(b(e.$$.fragment,s),a=!0)},o(s){g(e.$$.fragment,s),a=!1},d(s){X(e,s)}}}function Ae(t,e,a){let{$$slots:s={},$$scope:n}=e,{isSelected:l=!1}=e,{disabled:o=!1}=e;function r(i){_.call(this,t,i)}return t.$$set=i=>{"isSelected"in i&&a(0,l=i.isSelected),"disabled"in i&&a(1,o=i.disabled),"$$scope"in i&&a(4,n=i.$$scope)},[l,o,s,r,n]}class $e extends P{constructor(e){super(),A(this,e,Ae,Pe,w,{isSelected:0,disabled:1})}}export{Be as B,$e as P,Xe as a,Ue as b,Ye as c,We as d,Ge as e,Re as f,qe as g,Fe as h,Ke as i,He as j,Je as o,Qe as u};
