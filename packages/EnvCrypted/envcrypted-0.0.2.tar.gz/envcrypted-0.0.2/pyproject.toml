[project]
  name            = "EnvCrypted"
  version         = "0.0.2"
  requires-python = ">= 3.12"
  readme          = "README.md"
  authors         = [{ name = "Alchemyst0x", email = "alchemyst@blockmage.dev" }]
  license         = { text = "Apache-2.0" }

  description = "EnvCrypted is a high-performance Python 3.12+ package that encrypts all environment variables using age encryption with ephemeral keys generated at runtime. (Note: This package is highly experimental!)"

  dependencies = [
    "pyrage>=1.2.1",
    "pyrage-stubs>=1.2.3",
    "python-dotenv>=1.0.1",
  ]

  [project.scripts]
    "cryptenv" = "envcrypted:main"

  [project.optional-dependencies]
    onepassword = [
      "onepassword-sdk>=0.1.3",
      "pydantic>=2.9.2",
      "pydantic-settings>=2.6.1",
    ]

[tool.hatch.build.targets.wheel]
  packages = ["src/envcrypted"]

[build-system]
  requires      = ["hatchling"]
  build-backend = "hatchling.build"

[tool.rye]
  managed           = true
  lock-with-sources = true
  generate-hashes   = true

  dev-dependencies = [
    "codespell>=2.3.0",
    "devtools>=0.12.0",
    "mypy>=1.12.0",
    "pre-commit>=4.0.0",
    "pyrage-stubs>=1.2.0",
    "pytest-mock>=3.14.0",
    "pytest>=8.3.0",
    "ruff>=0.7.0",
    "types-aioboto3>=13.2.0",
    "types-pyyaml>=6.0.0",
  ]

[tool.hatch.metadata]
  allow-direct-references = true

[tool.codespell]
  builtin           = "clear,code,informal,rare,usage"
  ignore-words-list = "deque,deques,jupyter,keypair"

[tool.mypy]
  plugins              = ["pydantic.mypy"]
  no_implicit_optional = true
  show_column_numbers  = true
  show_error_codes     = true
  show_error_context   = true
  warn_redundant_casts = true
  warn_return_any      = false
  warn_unused_configs  = true
  warn_unused_ignores  = true

  [[tool.mypy.overrides]]
    module             = "tests.*"
    disable_error_code = "annotation-unchecked"

[tool.pydantic-mypy]
  init_typed                    = true
  init_forbid_extra             = true
  warn_required_dynamic_aliases = true
